<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <title>TicketBoost</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Aldrich&family=Orbitron:wght@400..900&display=swap"
      rel="stylesheet"
    />
      <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>

    function component_to_hex(c) {
    const hex = c.toString(16);
    return hex.length == 1 ? "0" + hex : hex;
    }

    function rgb_to_hex(r, g, b) {
    return "#" + component_to_hex(r) + component_to_hex(g) + component_to_hex(b);
    }

    function rgb_str_to_hex(string) {
    let srtrings = string.replaceAll(" ", "").split(",");
    let r = parseInt(srtrings[0]);
    let g = parseInt(srtrings[1]);
    let b = parseInt(srtrings[2]);
    return rgb_to_hex(r,g,b);
    }

    function hexToRgb(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
    } : null;
    }

    defalut_colors = ["255, 188, 0", "255, 0, 235"]

    function set_defalut_colors() {
      for (let i = 1; i <= 2; i++) {
          let stored_color = localStorage.getItem(`color${i}`);
          if (stored_color != undefined){
              let colors = hexToRgb(stored_color);
              document.documentElement.style.setProperty(`--color${i}`, `${colors.r}, ${colors.g}, ${colors.b}`);
          } else {
              document.documentElement.style.setProperty(`--color${i}`, defalut_colors[i-1]);
          }
      }
    }

    set_defalut_colors();

    </script>

    <link rel="stylesheet" href="styles.css">

  </head>
  <body>

      <div onclick="settings()" id="settings_button" class="top_button" >
      <span class="material-symbols-outlined">
      settings
      </span>
      <h3 style="margin: 0px;" >Settings</h3>
    </div>

    <div onclick="log_in()" id="log_in_button" class="top_button" style="right: 3px;">
      <span class="material-symbols-outlined">
      login
      </span>
      <h3 style="margin: 0px;" >Log in</h3>
    </div>


    <div id="main_holder">
      <div id="header">
        <!-- <img src="/tickets.svg" alt="TicketBoost_logo" style="width: 60px" /> -->
         <?xml version="1.0" encoding="UTF-8" standalone="no"?> <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --> <svg width="60" height="60" viewBox="0 0 20 20" version="1.1" id="svg1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"> <defs id="defs1"> <linearGradient id="linearGradient1"> <stop style="stop-color:rgb(var(--color1));stop-opacity:1;" offset="0" id="stop1" /> <stop style="stop-color:rgb(var(--color2));stop-opacity:0.91580993;" offset="1" id="stop2" /> </linearGradient> <linearGradient xlink:href="#linearGradient1" id="linearGradient2" x1="0" y1="10.5" x2="20" y2="10.5" gradientUnits="userSpaceOnUse" /> </defs> <rect x="0" fill="none" width="20" height="20" id="rect1" y="0" /> <g id="g1"> <path d="M 20,6.38 18.99,9.2 V 9.19 C 18.47,9 17.96,9.03 17.46,9.27 c -0.5,0.24 -0.85,0.62 -1.04,1.14 -0.19,0.52 -0.16,1.03 0.07,1.53 0.24,0.5 0.62,0.84 1.15,1.03 v 0.01 L 16.63,15.8 1.57,10.42 2.56,7.63 C 3.08,7.82 3.59,7.79 4.09,7.55 4.59,7.32 4.93,6.94 5.12,6.42 5.31,5.9 5.28,5.39 5.04,4.89 4.81,4.4 4.43,4.06 3.91,3.87 L 4.93,1 Z M 15.03,12.07 16.4,8.31 C 16.52,8 16.5,7.66 16.36,7.36 16.22,7.06 15.97,6.83 15.66,6.71 L 8.14,3.98 C 7.5,3.75 6.77,4.1 6.54,4.72 L 5.17,8.48 c -0.24,0.65 0.1,1.37 0.74,1.6 l 7.52,2.74 c 0.14,0.05 0.28,0.08 0.43,0.08 0.52,0 1,-0.33 1.17,-0.83 z M 7.97,4.45 15.48,7.18 c 0.19,0.07 0.34,0.21 0.43,0.39 0.08,0.18 0.09,0.38 0.02,0.57 l -1.37,3.76 c -0.13,0.38 -0.58,0.59 -0.96,0.45 L 6.09,9.61 C 5.7,9.47 5.5,9.04 5.64,8.65 L 7.01,4.89 C 7.11,4.6 7.4,4.4 7.71,4.4 7.8,4.4 7.88,4.42 7.97,4.45 Z m 6.82,12.14 c 0.35,0.27 0.75,0.41 1.2,0.41 H 16 v 3 H 0 v -2.96 c 0.55,0 1.03,-0.2 1.41,-0.59 C 1.8,16.07 2,15.59 2,15.04 2,14.49 1.8,14.02 1.41,13.63 1.02,13.24 0.55,13.04 0,13.04 V 10 h 1.05 l -0.28,0.8 2.87,1.02 C 3.13,11.98 2.75,12.44 2.75,13 v 4 c 0,0.69 0.56,1.25 1.25,1.25 h 8 c 0.69,0 1.25,-0.56 1.25,-1.25 v -1.75 l 0.83,0.3 c 0.12,0.43 0.36,0.78 0.71,1.04 z M 3.25,17 v -4 c 0,-0.41 0.34,-0.75 0.75,-0.75 h 0.83 l 7.92,2.83 V 17 c 0,0.41 -0.34,0.75 -0.75,0.75 H 4 C 3.59,17.75 3.25,17.41 3.25,17 Z" id="path1" style="fill:url(#linearGradient2)" /> </g> </svg>
        <h2>TicketBoost</h2>
      </div>
      
      <div id="sections_holder" >

        <div id="home" class="section" >
          <div id="select_holder" style="height: 100%;">
            <div id="event_selector_button", style="height: 40px;">
              <h3 id="event_type_label" style="margin: 0px; text-align: center;" >
                Select Event Type
              </h3>
            </div>
            <div id="type_selector_choises">
            </div>
  
            <div id="cards_holder" style="display: flex ; justify-items: center; font-size: 50%; flex-direction: row; flex-wrap: wrap; justify-content: space-evenly; overflow: hidden;" >
            </div>
          </div>
          <div id="search_holder" style="height: 100%; opacity: 0">
            <div style="height: 40px; display: grid ; align-items: center; cursor: pointer; user-select: none; background: #000000e6;">
              <h3 onclick="switch_to_search_animation.reverse()" style="margin: 0px; text-align: center; color: white;" >
                Back
              </h3>
            </div>
            <div style="display: flex; align-items: center; justify-content: center;">
              <h2>searching</h2>
              <div id="tick_holder" style="display: grid ; width: 10px; height: 10px; transform: translate(400%, -120%);" ></div>
            </div>
            <hr>
            <div id="tickets_holder" >
            </div>
          </div>

        </div>


        <div id="settings" class="section" style="transform: translateX(-101%);" >
          <table style="width: 100%;" >
            <tbody>
              <tr>
                <td>Main color: </td>
                <td><input type="color" id="color1_input" style="width: 100%;" ></td>
              </tr>
    
               <tr>
                <td>Secondary color: </td>
                <td><input type="color" id="color2_input" style="width: 100%;" ></td>
              </tr>

               <tr>
                <td>Custom colors: </td>
                <td><button onclick="reset_colors()" style="color: black; width: 100%;" >reset</button></td>
              </tr>

               <tr>
                <td>Save data: </td>
                <td><button onclick="reset_memeory()" style="color: black; width: 100%;" >delete</button></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div id="login" class="section" style="transform: translateX(101%);">
          <div style="display: grid; justify-content: center;" >
            <div id="log_in_form" >
              <h1>Email</h1>
              <input type="text" style="font-size: large;" >
              <h1>Password</h1>
              <input type="password" style="font-size: large;" >
            </div>
            <button id="submit_button" onclick="spin_button()" >Log in</button>
          </div>
        </div>
      </div>

      


    </div>
    <p style="position: absolute; bottom: 0; left: 20px; color: rgba(255, 255, 255, 0.548);" >Made By Oleg</p>
  </body>

  <script src="https://cdn.jsdelivr.net/npm/animejs/lib/anime.iife.min.js"></script>

  <script>

    const { animate, stagger, createTimeline, text } = anime;
    
    let event_selector_open = false;
    let menu_state = "home";
    let event_choice = "none";
    let continue_animation = "none";
    // let menu_timeline_animation = createTimeline();

    function add_ticks() {
      for (let i = 0; i < 10; i++) {
        let tick = document.createElement("div");
        tick.classList.add("tick");

        $("#tick_holder").append(tick);
      }
    }

    add_ticks();

    animate(".tick", {
      rotate: stagger(40),
      loop: true,
    });

    let ticket_source_part1 = ["buy", "great", "price", "order", "all", "best"];
    let ticket_source_end = ["com", "ca", "net", "org"]

    function add_ticket(price, ticket_delay) {
      let ticket = document.createElement("div");
      ticket.style = "background: white; border-radius: 12px; display: flex; justify-content: space-between; margin: 3px; height: min-content;"
      ticket.classList.add("ticket");

        let ticket_front = document.createElement("div");
        ticket_front.style = "display: flex ; align-items: center;";

          let ticket_logo = document.createElement("img");
          ticket_logo.src = "/images/ticket.svg"
          ticket_logo.style = "width: 30px; height: 30px; margin-left: 10px;"

          let ticket_price = document.createElement("h3");
          ticket_price.style = "background: gold; border-radius: 5px; padding: 4px; margin: 4px;"
          ticket_price.textContent = `\$${price}`;

          let ticket_source = document.createElement("p");
          ticket_source.style = "font-size: 80%;"
          let t1 = ticket_source_part1[Math.floor(Math.random()*ticket_source_part1.length)];
          let t2 = ticket_source_end[Math.floor(Math.random()*ticket_source_end.length)];
          if (Math.round(Math.random()) > 0){
            ticket_source.textContent = `${t1}tickets.${t2}`;
          } else {
            ticket_source.textContent = `tickets${t1}.${t2}`;
          }
        
        ticket_front.append(ticket_logo);
        ticket_front.append(ticket_price);
        ticket_front.append(ticket_source);

        let ticket_back = document.createElement("div");

          let ticket_buy_button = document.createElement("button");
          ticket_buy_button.style = "margin-left: 5px; background: #416cdc; height: 100%; border-bottom-right-radius: 12px; border-top-right-radius: 12px;";
          ticket_buy_button.textContent = "buy";
        
        ticket_back.append(ticket_buy_button);

      ticket.append(ticket_front);
      ticket.append(ticket_back);

      ticket.style.transform = "translateY(200vh)";

      animate(ticket, {
        translateY: "0vh",
        delay: ticket_delay,
        duration: 1000,
        composition: "none",
      });

      $("#tickets_holder").append(ticket);
    }

    function add_tickets() {
      let delay_offest = 0;
      $(".ticket").remove();

      let price = Math.floor(Math.random()*100)+40;

      for (let i = 0; i < (Math.floor(Math.random()*6)+4); i++) {
        let rand_delay = Math.floor(Math.random()*1500)+500;
        delay_offest += rand_delay;

        
        add_ticket(price, delay_offest);

        price -= Math.floor(Math.random()*10);

        if (price < 10) {
          price = 10;
        }

      }
    }

  

    function reset_memeory() {
      localStorage.clear();
      reset_colors();
    }

    function reset_colors() {
      for (let i = 1; i <= 2; i++) {
        localStorage.removeItem(`color${i}`);
      }
      set_defalut_colors();
      reset_color_inputs();
    }

    let card_types = {
      "concerts": [
        {name: "The Weeknd", source: "/images/weeknd.png"},
        {name: "Ed Sheeran", source: "/images/ed_sheeran.png"},
        {name: "Sabrina Carpenter", source: "/images/sabrina.png"},
        {name: "Billie Eilish", source: "/images/billie.png"},
      ],
      "sport events": [
        {name: "American football", source: "/images/american_football.png"},
        {name: "Volleyball", source: "/images/volleyball.png"},
        {name: "Baseball", source: "/images/baseball.png"},
        {name: "Hokey", source: "/images/hockey.png"},
      ],
      "plays": [
        {name: "Romeo and Juliet", source: "/images/romeo_and_juliet.png"},
        {name: "Hamlet", source: "/images/hamlet.png"},
        {name: "Macbeth", source: "/images/macbeth.png"},
        {name: "A Midsummer Night's Dream", source: "/images/midsummer.png"},
      ],
      "movies": [
        {name: "Despicable Me 4", source: "/images/despicable_me_4.png"},
        {name: "American Psycho", source: "/images/american_psycho.png"},
        {name: "War of the Worlds", source: "/images/war_of_the_worlds.png"},
        {name: "The Dark Knight", source: "/images/the_dark_night.png"},
      ]
    }

    let card_label_style = "display: grid; grid-template-columns: auto 100%; align-items: center; justify-items: start; padding-left: 20px; padding-right: 20px;";

    function add_card(count, event_type, offset) {
      let card = document.createElement("div");
      let card_data = card_types[event_type][count];
      card.classList.add("card");

      let image = document.createElement("img");

      // let seed = String(Math.round(Math.random()*100));
      // let source = `https://picsum.photos/seed/${seed}/800/800`;
      // console.log(source);

      image.src = card_data.source;

      image.style = "width: 100%; border-top-left-radius: 12px; border-top-right-radius: 12px;";

      let name_label = document.createElement("h1");
      name_label.textContent = card_data.name;
      // name_label.textContent = `${event_type}`;
      // name_label.textContent = "Test name";
      name_label.style = "text-align: center;";

      let now = new Date();

      let day = (1*1000*60*60*24);

      let rand_day_offest = Math.floor(Math.random()*12);

      let time_offset = day*rand_day_offest;

      let event_date = new Date(now.getTime() + time_offset); 

      let event_date_str = event_date.toDateString();

      let first_space = event_date_str.indexOf(" ");
      event_date_str = event_date_str.substring(first_space+1);

      let date_label = document.createElement("div");
      date_label.style = card_label_style;

        let data_label_icon = document.createElement("span");
        data_label_icon.classList.add("material-symbols-outlined");
        data_label_icon.textContent = "calendar_clock";
      
        let data_label_text = document.createElement("h3");
        data_label_text.style = "width: max-content;";
        data_label_text.textContent = event_date_str;
      
      date_label.append(data_label_icon);
      date_label.append(data_label_text);

      let location_label = document.createElement("div");
      location_label.style = card_label_style;

        let location_label_icon = document.createElement("span");
        location_label_icon.classList.add("material-symbols-outlined");
        location_label_icon.textContent = "distance";
      
        let location_label_text = document.createElement("h3");
        location_label_text.style = "width: max-content;";
        location_label_text.textContent = "Test location";
      
      location_label.append(location_label_icon);
      location_label.append(location_label_text);

      card.append(image);
      card.append(name_label);
      card.append(date_label);
      card.append(location_label);

      card.addEventListener("click", function(e) {
          switch_to_search_animation.play();
          add_tickets();
      });

      if (offset == "left"){
        card.style.transform = "translateX(-100vw)";
      } else if (offset == "right") {
        card.style.transform = "translateX(100vw)";
      }

      $("#cards_holder").append(card);
    }

    function add_cards(event_type) {
      animate(".card", {
        translateY: "-100vh",
        onComplete: self => {
          $(".card").remove();

          for (let i = 0; i < 4; i++) {
            let offset = "right";
            if (i%2 == 0){
              offset = "left";
            }
            add_card(i, event_type, offset);
          }
          event_choice = "none";

          animate(".card", {
          translateX: "0vw",

      });

        }
      });

      
    }

    

    

    function get_characters() {
      return text.split('#event_type_label', {chars: { wrap: 'clip' }}).chars;
    }

    get_characters();


    function text_change(changed_text) {
      let characters = get_characters();
      animate(characters, {
        y: [
          { to: '-100%', delay: stagger(50), ease: 'in(3)' },
        ],
        duration: 400,
        onComplete: self => {
          $("#event_type_label").text(changed_text);
          characters = get_characters();

          animate(characters, {
            y: [
              { to: ['100%', '0%'] },
            ],
            duration: 750,
            ease: 'out(3)',
            delay: stagger(50),
          });
        }
      });
    }

    

    

    let switch_to_login_animation = createTimeline({autoplay: false})
      .add("#settings_button", {translateY: "-200%", duration: 500}, 0)
      .add("#log_in_button", {width: "100%", duration: 500}, 0)
      .add("#home", {translateY: "-100%", ease: "inQuad", duration: 500, composition: "none"}, 500)
      .add("#home", {translateX: "-100%", ease: "inQuad", duration: 1, composition: "none"}, 1000)
      .add("#login", {translateX: "0%", ease: "inQuad"});
      
      
      let switch_to_settings_animation = createTimeline({autoplay: false})
      .add("#log_in_button", {translateY: "-200%", duration: 500}, 0)
      .add("#settings_button", {width: "100%", duration: 500}, 0)
      .add("#home", {translateY: "-100%", ease: "inQuad", duration: 500, composition: "none"}, 500)
      .add("#home", {translateX: "-100%", ease: "inQuad", duration: 1, composition: "none"}, 1000)
      .add("#settings", {translateX: "0%", ease: "inQuad"});

    let switch_to_search_animation = createTimeline({autoplay: false})
      .add("#select_holder", {translateY: "-100%", ease: "inQuad", duration: 500, composition: "none"}, 0)
      .add("#search_holder", {translateY: "-100%", ease: "inQuad", duration: 500, composition: "none"}, 0)
      .add("#search_holder", {opacity: 1, duration: 1}, 0)
    
    

    function log_in() {
      if (menu_state == "home"){
        switch_to_login_animation.play();
        menu_state = "login";
      } else if (menu_state == "login"){
        switch_to_login_animation.reverse();
        menu_state = "home";
      }
    }

    function settings() {
      if (menu_state == "home"){
        switch_to_settings_animation.play();
        menu_state = "settings";
      } else if (menu_state == "settings"){
        switch_to_settings_animation.reverse();
        menu_state = "home";
      }
    }

    function spin_button(){
      animate("#submit_button", {
        rotate: "360deg",
        onComplete: self => self.revert(),
      });
    }

    // let event_types = ["concerts"];
    let event_types = ["concerts", "sport events", "plays", "movies"];

    for (let event_number in event_types) {
      let event = event_types[event_number];
      let event_div = document.createElement("div");
      event_div.style.cursor = "pointer";
      event_div.textContent = event_types[event_number];

      event_div.style.transform = `translateY(-1000%)`;
      event_div.style.textAlign = `center`;
      event_div.style.width = `0%`;
      event_div.addEventListener("click", function(e) {
        text_change(event_types[event_number]);
        event_choice = event_types[event_number];
        toggle_event_selector();
      });
      
      $("#type_selector_choises").append(event_div);

      event_div.classList.add("even_select_buttons");
    }

    function event_select_buttons_animation_complete() {
      if (!event_selector_open) {
        if (event_choice != "none") {
          console.log(event_choice)
          add_cards(event_choice);
        } 
      }
    }

    let event_selector_animation = animate('.even_select_buttons', {
      autoplay: false,
      keyframes: [
        { translateY: '0%', duration: 400, delay: stagger(100, { reversed: true }), },
        { width: '100%', duration: 400, delay: stagger(100, { reversed: false }) },
      ],
      onComplete: self => event_select_buttons_animation_complete()
    });

    $("#event_selector_button").on("click", function() {
      toggle_event_selector();
    });

    function toggle_event_selector() {
      if (!event_selector_open){
        event_selector_animation.play();
      } else {
        event_selector_animation.reverse();
      }
      event_selector_open = !event_selector_open;
    }

    function reset_color_inputs() {
      document.getElementById("color1_input").value = `${rgb_str_to_hex(document.documentElement.style.getPropertyValue("--color1"))}`;
      document.getElementById("color2_input").value = `${rgb_str_to_hex(document.documentElement.style.getPropertyValue("--color2"))}`;
    }

    reset_color_inputs();

    
    for (let i = 1; i <= 2; i++) {
        document.getElementById(`color${i}_input`).addEventListener("input", function(e) {
            let colors = hexToRgb(document.getElementById(`color${i}_input`).value);
            document.documentElement.style.setProperty(`--color${i}`, `${colors.r}, ${colors.g}, ${colors.b}`);
        });
        document.getElementById(`color${i}_input`).addEventListener("change", function(e) {
            localStorage.setItem(`color${i}`, document.getElementById(`color${i}_input`).value);
        });
    }
    
  </script>
</html>
